{"ast":null,"code":"var _jsxFileName = \"/home/pinkyy/zebi/dirabk/spotyhi/src/Playlists/Playlists.js\",\n    _s = $RefreshSig$();\n\n// get the user playlists and show them on a list with export button\n// export button export the playlist to a json file\n// this function won't have a search bar\n// it simply shows the user's playlists\nimport React, { useState, useEffect } from 'react';\nimport './Playlists.css';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Playlists = () => {\n  _s();\n\n  const [playlists, setPlaylists] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const token = localStorage.getItem('access_token');\n\n  const exportPlaylist = playlist => {\n    const playlistName = playlist.name;\n    const playlistTracks = playlist.tracks.items;\n    const playlistTracksArray = [];\n    playlistTracks.forEach(track => {\n      playlistTracksArray.push(track.track.name);\n    });\n    const playlistTracksString = playlistTracksArray.join(', ');\n    const playlistString = `${playlistName} - ${playlistTracksString}`;\n    const playlistJSON = JSON.stringify(playlistString);\n    const blob = new Blob([playlistJSON], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${playlistName}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  useEffect(() => {\n    if (token) {\n      axios.get('https://api.spotify.com/v1/me/playlists', {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(response => {\n        setPlaylists(response.data.items);\n        console.log(response.data.items);\n        setLoading(false);\n      }).catch(error => {\n        setError(error);\n        setLoading(false);\n      });\n    }\n  }, []);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (!playlists && !token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Not logged in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Playlists\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Playlists-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Playlists\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Playlists-list\",\n      children: playlists.map(playlist => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Playlists-list-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Playlists-list-item-image\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: playlist.images[0].url,\n            alt: \"Playlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Playlists-list-item-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Playlists-list-item-name\",\n            children: playlist.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Playlists-list-item-tracks\",\n            children: [playlist.tracks.total, \" tracks\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Playlists-list-item-export\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportPlaylist,\n            children: \"Export\"\n          }, 'play', false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this)]\n      }, playlist.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Playlists, \"SA2AOzH5C36IUcyaLIEPV+RRUeE=\");\n\n_c = Playlists;\nexport default Playlists;\n\nvar _c;\n\n$RefreshReg$(_c, \"Playlists\");","map":{"version":3,"names":["React","useState","useEffect","Link","axios","Playlists","playlists","setPlaylists","loading","setLoading","error","setError","token","localStorage","getItem","exportPlaylist","playlist","playlistName","name","playlistTracks","tracks","items","playlistTracksArray","forEach","track","push","playlistTracksString","join","playlistString","playlistJSON","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","get","headers","then","response","data","console","log","catch","message","map","images","total","id"],"sources":["/home/pinkyy/zebi/dirabk/spotyhi/src/Playlists/Playlists.js"],"sourcesContent":["// get the user playlists and show them on a list with export button\n// export button export the playlist to a json file\n// this function won't have a search bar\n// it simply shows the user's playlists\n\nimport React, { useState, useEffect } from 'react';\nimport './Playlists.css';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios'\n\n\n\n\n\n\n\n\n\n\nconst Playlists = () => {\n\n    const [playlists, setPlaylists] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const token = localStorage.getItem('access_token');\n\n\n\n\n    const exportPlaylist = (playlist) => {\n        const playlistName = playlist.name;\n        const playlistTracks = playlist.tracks.items;\n        const playlistTracksArray = [];\n        playlistTracks.forEach(track => {\n            playlistTracksArray.push(track.track.name);\n        });\n        const playlistTracksString = playlistTracksArray.join(', ');\n        const playlistString = `${playlistName} - ${playlistTracksString}`;\n        const playlistJSON = JSON.stringify(playlistString);\n        const blob = new Blob([playlistJSON], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${playlistName}.json`;\n        a.click();\n        URL.revokeObjectURL(url);\n    }\n\n\n\n    useEffect(() => {\n        \n        if (token) {\n            axios.get('https://api.spotify.com/v1/me/playlists', {\n                headers: {\n                    'Authorization': 'Bearer ' + token\n                }\n            })\n            .then(response => {\n                setPlaylists(response.data.items);\n                console.log(response.data.items)\n                setLoading(false);\n            })\n            .catch(error => {\n                setError(error);\n                setLoading(false);\n            });\n        }\n    }\n    , [])\n\n    if (loading) {\n        return <div>Loading...</div>\n    }\n\n    if (error) {\n        return <div>Error: {error.message}</div>\n    }\n\n    if (!playlists && !token) {\n        return <div>Not logged in</div>\n    }\n\n\n    return (\n        <div className='Playlists'>\n            <div className='Playlists-header'>\n                <h1>Playlists</h1>\n            </div>\n            <div className='Playlists-list'>\n                {playlists.map(playlist => (\n                    <div className='Playlists-list-item' key={playlist.id}>\n                        <div className='Playlists-list-item-image'>\n                            <img src={playlist.images[0].url} alt='Playlist' />\n                        </div>\n                        <div className='Playlists-list-item-info'>\n                            <div className='Playlists-list-item-name'>{playlist.name}</div>\n                            <div className='Playlists-list-item-tracks'>{playlist.tracks.total} tracks</div>\n                        </div>\n                        <div className='Playlists-list-item-export'>\n                            <button key='play' onClick={exportPlaylist} >Export</button>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    )\n}\n\nexport default Playlists;"],"mappings":"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"},"metadata":{},"sourceType":"module"}